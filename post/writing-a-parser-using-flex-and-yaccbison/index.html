<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Writing a Parser using (F)LEX and YACC/BISON - Sayef&#39;s Tech Blog</title><meta name="Description" content="Writing a Parser using (F)LEX and YACC/BISON"><meta property="og:title" content="Writing a Parser using (F)LEX and YACC/BISON" />
<meta property="og:description" content="Writing a Parser using (F)LEX and YACC/BISON" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" /><meta property="og:image" content="https://sayef.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-19T04:15:37+08:00" />
<meta property="article:modified_time" content="2018-06-19T04:15:37+08:00" /><meta property="og:site_name" content="Sayef&#39;s Tech Blog" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://sayef.github.io/logo.png"/>

<meta name="twitter:title" content="Writing a Parser using (F)LEX and YACC/BISON"/>
<meta name="twitter:description" content="Writing a Parser using (F)LEX and YACC/BISON"/>
<meta name="application-name" content="Sayef&#39;s Tech Blog">
<meta name="apple-mobile-web-app-title" content="Sayef&#39;s Tech Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" /><link rel="prev" href="https://sayef.github.io/post/postgresql-installation/" /><link rel="next" href="https://sayef.github.io/post/linked-list-basics/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Writing a Parser using (F)LEX and YACC/BISON",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/sayef.github.io\/post\/writing-a-parser-using-flex-and-yaccbison\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/sayef.github.io\/images\/Apple-Devices-Preview.png",
                            "width":  3200 ,
                            "height":  2048 
                        }],"genre": "posts","keywords": "lexical-analyzer, parser, yacc, bison","wordcount":  1411 ,
        "url": "https:\/\/sayef.github.io\/post\/writing-a-parser-using-flex-and-yaccbison\/","datePublished": "2018-06-19T04:15:37+08:00","dateModified": "2018-06-19T04:15:37+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/sayef.github.io\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "Sayef"
            },"description": "Writing a Parser using (F)LEX and YACC/BISON"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Sayef&#39;s Tech Blog"><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/sayef" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Sayef&#39;s Tech Blog"><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/sayef" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw' aria-hidden='true'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Writing a Parser using (F)LEX and YACC/BISON</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://sayef.tech" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Sayef</a></span>&nbsp;<span class="post-category">included in <a href="/categories/lexical-analyzer/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Lexical Analyzer</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2018-06-19">2018-06-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1411 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;7 minutes&nbsp;<span id="/post/writing-a-parser-using-flex-and-yaccbison/" class="leancloud_visitors" data-flag-title="Writing a Parser using (F)LEX and YACC/BISON">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;views
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-task-description">1 Task Description</a></li>
    <li><a href="#2-implementation">2 Implementation</a>
      <ul>
        <li><a href="#21-samples">2.1 Samples</a>
          <ul>
            <li><a href="#211-input-1">2.1.1 Input 1</a></li>
            <li><a href="#212-output-1">2.1.2 Output 1</a></li>
            <li><a href="#221-input-1">2.2.1 Input 1</a></li>
            <li><a href="#222-output-2">2.2.2 Output 2</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#3-structures-of-lex-analyzer-and-yacc-parser">3 Structures of Lex (analyzer) and YACC (parser)</a>
      <ul>
        <li><a href="#31-lex-lexical-analyzer">3.1 Lex (Lexical Analyzer):</a></li>
        <li><a href="#32-structure-of-a-lex-file">3.2 Structure of a Lex file</a></li>
        <li><a href="#33-example-of-a-lex-file">3.3 Example of a Lex file</a></li>
        <li><a href="#34-yacc-yet-another-compiler-compiler-parser">3.4 YACC-Yet Another Compiler Compiler (Parser)</a></li>
        <li><a href="#35-structure-of-a-yacc-source-program">3.5 Structure of a YACC source program</a></li>
      </ul>
    </li>
    <li><a href="#4-my-source-code-simple-parser-using-lex-and-yacchttpsgithubcomsayefsimple-parser-using-lex-and-yacc">4 My Source code: <a href="https://github.com/Sayef/Simple-Parser-Using-Lex-and-Yacc">Simple Parser using Lex and Yacc</a></a>
      <ul>
        <li><a href="#41-how-to-run-my-code">4.1 How to run my code</a></li>
        <li><a href="#42-input">4.2 Input</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="1-task-description">1 Task Description</h2>
<p>We will implement few statements found in C. We will call this language SubC. Given the grammar of SubC we will write the F(LEX) and YACC/BISON specification file that parses code written in SubC. We will generate a parser for only assignment statements. Following is the grammar for assignment statements for SubC.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Stmt_list ‚Üí Stmt | Stmt_list ; Stmt
</span></span><span class="line"><span class="cl">Stmt ‚Üí Variable **assignop** Expression
</span></span><span class="line"><span class="cl">Variable ‚Üí **id** | **id** [Expression]
</span></span><span class="line"><span class="cl">Expression ‚Üí Simple_expression | Simple_expression **relop** Simple_expression
</span></span><span class="line"><span class="cl">Simple_expression ‚Üí Term | Simple_expression **addop** Term
</span></span><span class="line"><span class="cl">Term ‚Üí Factor | Term **mulop** Factor
</span></span><span class="line"><span class="cl">Factor ‚Üí **id** | **num** | ( Expression) | **id** [Expression] | **not** Factor
</span></span></code></pre></td></tr></table>
</div>
</div><p>Tokens/Terminal symbols of this grammar are in BOLD font. Below are the specifications for the tokens</p>
<table>
<thead>
<tr>
<th>Token Name</th>
<th>Pattern/Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Id</td>
<td>Starts with a letter followed by letters, digits, or underscore. Max length 5 characters. Cannot be any of the keywords: ‚Äúif‚Äù, ‚Äúelse‚Äù, ‚Äúwhile‚Äù, ‚Äúfor‚Äù, ‚Äúrepeat‚Äù, ‚Äúuntil‚Äù, ‚Äúreturn‚Äù , ‚Äúmain‚Äù</td>
</tr>
<tr>
<td>Num</td>
<td>Integers ‚Äê real numbers that include a decimal point and at least one digit to the left and right of the point</td>
</tr>
<tr>
<td>Relop</td>
<td>‚Äú&lt;‚Äú, ‚Äú&gt;‚Äù, ‚Äú&lt;=‚Äù, ‚Äú&gt;=‚Äù, ‚Äú==‚Äù, ‚Äú!=‚Äù</td>
</tr>
<tr>
<td>Addop</td>
<td>‚Äú+‚Äù,‚Äù‚Äê‚Äù,&quot;\pipe\pipe&quot;</td>
</tr>
<tr>
<td>Mulop</td>
<td>‚Äú*‚Äù, ‚Äú/‚Äù, ‚Äú%‚Äù, ‚Äú&amp;&amp;‚Äù</td>
</tr>
<tr>
<td>Assignop</td>
<td>‚Äú=‚Äù</td>
</tr>
<tr>
<td>Not</td>
<td>‚Äú!‚Äù</td>
</tr>
</tbody>
</table>
<p>If successful in parsing a list of statements the parser will print ‚Äúsuccess‚Äù otherwise will print appropriate error message.</p>
<h2 id="2-implementation">2 Implementation</h2>
<p>We have to write (F)LEX and YACC/BISON specification files (e.g., subc.l and subc.y). The parser that yacc/bison generates should be able to call the lexical analyzer generated by lex/flex and perform parsing of the code (i.e., list of assignment statements) generated by the given grammar. Your LEX specification should be able to remove any white space from the code. All ids should be stored in a symbol table and printed out as output.</p>
<h3 id="21-samples">2.1 Samples</h3>
<h4 id="211-input-1">2.1.1 Input 1</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">b= b + 1;
</span></span><span class="line"><span class="cl">input[b+2]   = b; a = input [i+2]
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="212-output-1">2.1.2 Output 1</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">b
</span></span><span class="line"><span class="cl">input
</span></span><span class="line"><span class="cl">a
</span></span><span class="line"><span class="cl">Success
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="221-input-1">2.2.1 Input 1</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a[]=0.2
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="222-output-2">2.2.2 Output 2</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a
</span></span><span class="line"><span class="cl">missing expression
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="3-structures-of-lex-analyzer-and-yacc-parser">3 Structures of Lex (analyzer) and YACC (parser)</h2>
<h3 id="31-lex-lexical-analyzer">3.1 Lex (Lexical Analyzer):</h3>
<p><strong>Lex</strong> is a computer program that generates lexical analyzers (what we did manually in the assignment 1 by java, but installing lex in the computer will do it automatically). Lex reads an input stream specifying the lexical analyzer and outputs source code implementing the lexer in the C programming language.</p>
<h3 id="32-structure-of-a-lex-file">3.2 Structure of a Lex file</h3>
<p>The structure of a Lex file is intentionally similar to that of a yacc file; files are divided into three sections, separated by lines that contain only two percent signs, as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Definition section
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">Rules section
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">C code section
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>The <strong>definition</strong> section defines macros and imports header files written in C. It is also possible to write any C code here, which will be copied verbatim into the generated source file.</li>
<li>The <strong>rules</strong> section associates regular expression patterns with C statements. When the lexer sees text in the input matching a given pattern, it will execute the associated C code.</li>
<li>The <strong>C code</strong> section contains C statements and functions that are copied verbatim to the generated source file. These statements presumably contain code called by the rules in the rules section. In large programs it is more convenient to place this code in a separate file linked in at compile time.</li>
</ul>
<h3 id="33-example-of-a-lex-file">3.3 Example of a Lex file</h3>
<p>The following is an example Lex file for the flex version of Lex. It recognizes strings of numbers (integers) in the input, and simply prints them out.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">/*** Definition section ***/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%{
</span></span><span class="line"><span class="cl">/* C code to be copied verbatim */
</span></span><span class="line"><span class="cl">#include &lt;stdio.h&gt;
</span></span><span class="line"><span class="cl">%}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">/* This tells flex to read only one input file */
</span></span><span class="line"><span class="cl">%option noyywrap
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">    /*** Rules section ***/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    /* [0-9]+ matches a string of one or more digits */
</span></span><span class="line"><span class="cl">[0-9]+  {
</span></span><span class="line"><span class="cl">            /* yytext is a string containing the matched text. */
</span></span><span class="line"><span class="cl">            printf(&#34;Saw an integer: %s\n&#34;, yytext);
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">.|\n    {   /* Ignore all other characters. */   }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">/*** C Code section ***/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">int main(void)
</span></span><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">    /* Call the lexer, then quit. */
</span></span><span class="line"><span class="cl">    yylex();
</span></span><span class="line"><span class="cl">    return 0;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>If this input is given to flex, it will be converted into a C file, lex.yy.c. This can be compiled into an executable which matches and outputs strings of integers. For example, given the input:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">abc123z.!&amp;*2gj6
</span></span></code></pre></td></tr></table>
</div>
</div><p>The program will print:</p>
<p>Saw an integer: 123
Saw an integer: 2
Saw an integer: 6</p>
<h3 id="34-yacc-yet-another-compiler-compiler-parser">3.4 YACC-Yet Another Compiler Compiler (Parser)</h3>
<p>It is a LALR parser generator, generating a parser, the part of a compiler that tries to make syntactic sense of the source code.</p>
<p>For example, a C program may contain something like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">    int int;
</span></span><span class="line"><span class="cl">    int = 33;
</span></span><span class="line"><span class="cl">    printf(&#34;int: %d\n&#34;,int);
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>In this case, the lexical analyzer would have broken the input stream into a series of ‚Äútokens‚Äù, like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">int
</span></span><span class="line"><span class="cl">int
</span></span><span class="line"><span class="cl">;
</span></span><span class="line"><span class="cl">int
</span></span><span class="line"><span class="cl">=
</span></span><span class="line"><span class="cl">33
</span></span><span class="line"><span class="cl">;
</span></span><span class="line"><span class="cl">printf
</span></span><span class="line"><span class="cl">(
</span></span><span class="line"><span class="cl">&#34;int: %d\n&#34;
</span></span><span class="line"><span class="cl">,
</span></span><span class="line"><span class="cl">int
</span></span><span class="line"><span class="cl">)
</span></span><span class="line"><span class="cl">;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note that the <strong>lexical analyser (lex)</strong> has already determined that where the keyword <code>int</code> appears within quotes, it is really just part of a literal string. It is up to the <strong>parser</strong> to decide if the token <code>int</code> is being used as a keyword or variable. Or it may choose to reject the use of the name <code>int</code> as a variable name. The parser also ensures that each statement ends with a <code>;</code> and that the brackets balance.</p>
<p>More precisely lexical analyzer (i.e. lex) checks correctness of the stream of characters and parser (i.e. yacc) checks correctness of the stream of tokens i.e. which token will be followed by which one etc.</p>
<h3 id="35-structure-of-a-yacc-source-program">3.5 Structure of a YACC source program</h3>
<p>A YACC source program is structurally similar to a LEX one.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">declarations
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">rules
</span></span><span class="line"><span class="cl">%%
</span></span><span class="line"><span class="cl">routines
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>The declaration section may be empty. Moreover, if the routines section is omitted, the second %% mark may be omitted also.</li>
<li>Blanks, tabs, and newlines are ignored except that they may not appear in names.</li>
</ul>
<p><strong>THE DECLARATIONS SECTION</strong></p>
<p>This section may contain the following items -</p>
<ul>
<li>Declarations of tokens. Yacc requires token names to be declared as such using the keyword <code>%token</code>.</li>
<li>Declaration of the start symbol using the keyword <code>%start</code></li>
<li>C declarations: included files, global variables, types.</li>
<li>C code between <code>%{</code> and <code>%}</code>.</li>
</ul>
<p><strong>RULES SECTION</strong></p>
<p>A rule has the form -</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nonterminal : sentential form
</span></span><span class="line"><span class="cl">            | sentential form
</span></span><span class="line"><span class="cl">            .................
</span></span><span class="line"><span class="cl">            | sentential form
</span></span><span class="line"><span class="cl">            ;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Actions may be associated with rules and are executed when the associated sentential form is matched.</p>
<p><strong>LEX-YACC INTERACTION</strong></p>
<p><code>yyparse()</code> calls <code>yylex()</code> when it needs a new token.</p>
<table>
<thead>
<tr>
<th>LEX</th>
<th>YACC</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>return(TOKEN)</code></td>
<td>%token TOKEN</td>
</tr>
<tr>
<td></td>
<td>TOKEN is used in production</td>
</tr>
</tbody>
</table>
<p>The external variable <code>yylval</code></p>
<ul>
<li>
<p>is used in a LEX source program to return values of lexemes,</p>
</li>
<li>
<p><code>yylval</code> is assumed to be integer if you take no other action.</p>
</li>
<li>
<p>Changes related to <code>yylval</code> must be made</p>
<ul>
<li>
<p>in the definitions section of YACC specification</p>
<ul>
<li>
<p>by adding new types in the following way
<code>%union { (type fieldname) (type fieldname) ............... }</code></p>
</li>
<li>
<p>and defining which token and non-terminals will use these types</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">%token &lt;fieldname&gt; token
</span></span><span class="line"><span class="cl">%type &lt;fieldname&gt; non-terminal
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
<li>
<p>in LEX specification by using the fieldnames in the assignment as follows</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yylval.fieldname = ...........
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
</li>
</ul>
<p>If you need a record type, then add it in the union. Example:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">%union {
</span></span><span class="line"><span class="cl">   struct s {
</span></span><span class="line"><span class="cl">      double fvalue;
</span></span><span class="line"><span class="cl">      int ivalue;
</span></span><span class="line"><span class="cl">   } t;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>in the LEX specification use the record name and record field in assignments:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yylval.t.ivalue = ......
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>in the YACC rules specification use the record field only in the assignment:</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$1.ivalue = ......
</span></span></code></pre></td></tr></table>
</div>
</div><p>assuming that <code>$1</code> has the appropriate type, whatever it denotes.</p>
<h2 id="4-my-source-code-simple-parser-using-lex-and-yacchttpsgithubcomsayefsimple-parser-using-lex-and-yacc">4 My Source code: <a href="https://github.com/Sayef/Simple-Parser-Using-Lex-and-Yacc" target="_blank" rel="noopener noreffer ">Simple Parser using Lex and Yacc</a></h2>
<h3 id="41-how-to-run-my-code">4.1 How to run my code</h3>
<ol>
<li>Keep the parser folder anywhere in your computer.</li>
<li>Keep the Makefile.mk file in home.</li>
<li>Edit the first line of the Makefile.mk from ‚Äúcd parser‚Äù to ‚Äúcd path_of_the_parser_folder‚Äù</li>
<li>Go to command prompt and write ./Makefile.mk</li>
</ol>
<h3 id="42-input">4.2 Input</h3>
<ol>
<li>Initially input.txt is given in the parser folder. You can customize the inputs.</li>
<li>There is an additional input file named tricky_input.txt that contains some tricky cases.</li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2018-06-19</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/post/writing-a-parser-using-flex-and-yaccbison/index.md" target="_blank">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" data-title="Writing a Parser using (F)LEX and YACC/BISON" data-via="imsayef" data-hashtags="lexical-analyzer,parser,yacc,bison"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" data-hashtag="lexical-analyzer"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" data-title="Writing a Parser using (F)LEX and YACC/BISON"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" data-title="Writing a Parser using (F)LEX and YACC/BISON"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on ÂæÆÂçö" data-sharer="weibo" data-url="https://sayef.github.io/post/writing-a-parser-using-flex-and-yaccbison/" data-title="Writing a Parser using (F)LEX and YACC/BISON"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/lexical-analyzer/">lexical-analyzer</a>,&nbsp;<a href="/tags/parser/">parser</a>,&nbsp;<a href="/tags/yacc/">yacc</a>,&nbsp;<a href="/tags/bison/">bison</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/post/postgresql-installation/" class="prev" rel="prev" title="PostgreSQL Installation and DB Creation on Ubuntu 16.04"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>PostgreSQL Installation and DB Creation on Ubuntu 16.04</a>
            <a href="/post/linked-list-basics/" class="next" rel="next" title="Linked List Basics">Linked List Basics<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2019 - 2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="sayef.tech" target="_blank">Sayef</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"en","pageSize":10,"placeholder":"Your comment ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"data":{"id-1":"‚ì¢‚ìê‚ì®‚ìî‚ìï'ùìº ùìΩùìÆùì¨ùì± ùì´ùìµùì∏ùì∞","id-2":"‚ì¢‚ìê‚ì®‚ìî‚ìï'ùìº ùìΩùìÆùì¨ùì± ùì´ùìµùì∏ùì∞"},"lightgallery":true,"search":{"algoliaAppID":"PASDMWALPK","algoliaIndex":"index.en","algoliaSearchKey":"b42948e51daaa93df92381c8e2ac0f93","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
